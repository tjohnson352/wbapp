{% extends "base.html" %}

{% block title %}Feedback Survey{% endblock %}

{% block header %}
<h1 class="page-header">The Schedulizer Web App</h1>
{% endblock %}

{% block content %}
<div class="upload-container">
    {% if not submitted %}
    <h2>Feedback Survey</h2>
    <p class="description">
        Please provide your feedback before downloading your report. Your input helps us improve!
    </p>

    <form method="POST" action="/survey" id="surveyForm" class="form-container">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <!-- Question 1 -->
        <div class="form-group small-width">
            <label for="review_q1" class="form-label"><strong>1. Did the web app accurately read and display your schedule?</strong></label>
            <select id="review_q1" name="review_q1" class="form-input" required>
                <option value="" disabled selected>Select an option</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
            </select>
        </div>

        <!-- Question 2 -->
        <div class="form-group small-width">
            <label for="review_q2" class="form-label"><strong>2. Rate the app from 1 to 5:</strong></label>
            <input type="range" id="review_q2" name="review_q2" class="form-slider" min="1" max="5" step="1" value="3" oninput="updateSliderValue(this.value)" required>
            <div class="ruler">
                <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
            </div>
            <p class="slider-value">Your Rating: <span id="slider-value">3</span></p>
        </div>

        <!-- Question 3 -->
        <div class="form-group large-width">
            <label for="review_q3" class="form-label"><strong>3. Suggestions for improvement (optional):</strong></label>
            <textarea id="review_q3" name="review_q3" class="form-input" rows="4" placeholder="Your suggestions"></textarea>
        </div>

        <div class="button-container">
            <button type="submit" class="btn btn-primary">Submit Feedback</button>
        </div>
    </form>
    {% else %}
    <h2 class="thank-you-title">Thank You for Your Feedback!</h2>
    <p>We greatly appreciate your input! Here's a summary of your responses:</p>

    <div class="survey-responses">
        <div class="response-item">
            <p class="question"><strong>1. Did the web app accurately read and display your schedule?</strong></p>
            <p class="answer">{{ review_q1 }}</p>
        </div>

        <div class="response-item">
            <p class="question"><strong>2. Rate the app from 1 to 5:</strong></p>
            <p class="answer">{{ review_q2 }}</p>
        </div>

        <div class="response-item">
            <p class="question"><strong>3. Suggestions for improvement:</strong></p>
            <p class="answer">{{ review_q3 }}</p>
        </div>
    </div>

    <div class="button-container">
        <a href="/download_pdf" class="btn btn-primary">Download Your Report</a>
    </div>
    {% endif %}
</div>

<style>


    /* Titles and Descriptions */
    .thank-you-title {
        font-size: 2rem;
        color: #2980b9;
        margin-bottom: 15px;
        text-align: center;
    }

    /* Survey Responses */
    .survey-responses {
        margin: 20px 0;
    }

    .response-item {
        margin-bottom: 15px;
    }

    .response-item .question {
        font-size: 1rem;
        color: #555;
    }

    .response-item .answer {
        font-size: 1rem;
        font-style: italic;
        color: #b92929;
        margin-left: 15px;
    }

    /* Button Styling */
    .button-container {
        text-align: center;
        margin-top: 20px;
    }

    .btn-primary {
        text-decoration: none;
        padding: 12px 24px;
        font-size: 1rem;
        font-weight: bold;
        background-color: #2980b9;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }

    .btn-primary:hover {
        background-color: #1abc9c;
    }

    /* Form Elements */
    .form-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .form-group {
        display: flex;
        flex-direction: column;
    }

    .form-label {
        font-weight: bold;
        margin-bottom: 5px;
    }

    .form-input {
        padding: 10px;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .small-width {
        max-width: 300px;
    }

    .large-width {
        max-width: 500px;
    }

    /* Slider Styling */
    .slider-container {
        position: relative;
        margin-top: 10px;
    }

    .form-slider {
        width: 100%;
        margin: 5px 0;
        cursor: pointer;
    }

    .ruler {
        display: flex;
        justify-content: space-between;
        position: relative;
        top: -10px;
        font-size: 0.9rem;
        color: #333;
    }

    .slider-value {
        font-size: 1rem;
        color: #333;
        margin-top: 10px;
    }
</style>

<script>
    function updateSliderValue(value) {
        document.getElementById('slider-value').innerText = value;
    }
</script>
{% endblock %}
